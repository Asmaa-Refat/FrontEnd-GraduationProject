<html (click)="closeDropdownOnClickOutside()" dir="rtl" 

[ngClass]="{ 'sidebar-open': isOpen$ | async }">
<div id ="dropdowns" style="margin-right: 85px;">
  <div class="dropdown">
    <button
      (click)="clickServiceDropdown() ; getServicesNames()"
      class="dropbtn btn dropdown-toggle"

      data-toggle="dropdown"
    >
      خدمات الفرع
    </button>
    <div id="myServiceDropdown" class="dropdown-content" >
      <a
        (click)="chooseService('كل الخدمات'); getBranchStatsAndReviews() "
        id="serviceName"
        >كل الخدمات</a
      >
      <a
        *ngFor="let name of servicesNames"
        (click)="chooseService(name); getSerivceStatsAndReviews()"
        id="serviceName"
        >{{ name }}</a
      >
    </div>
  </div>

  <div class="dropdown" style="margin-right: 20px;">
    <button
      (click)="clickYearDropdown()"
      class="dropbtn btn dropdown-toggle"
      data-toggle="dropdown"
    >
      العام
    </button>
    <div id="myYearDropdown" class="dropdown-content">
      <a
        *ngFor="let year of reviewsYearsList"
        (click)="chooseYear(year); getSerivceStatsAndReviews()"
        id="serviceName"
        >{{ year }}</a
      >
    </div>
  </div>
</div>

<div class="container" id = "charts">
    <div [chart]="donutChart"></div>
    <div [chart]="barChart"></div>
    <div [chart]="positiveAreaSplineChart"></div>
    <div [chart]="negativeAreaSplineChart"></div>
</div>

<div class="review-container table" id="reviewsTable">
    <table class="table">
      <thead style="background-color: #004f83; color: white; ">
        <tr>
          <th scope="col">التعليقات</th>
          <th scope="col">اسم الخدمة</th>
          <th scope="col">التاريخ</th>
          <th scope="col">نوع التعليق</th>  
          <th scope="col">الحاله</th>
        </tr>
      </thead>
      <tbody>
        <tr
          class="table-light"
          id="positive"
          *ngFor="let review of positiveListReviews"
        >
          <th scope="row">{{ review["description"] }}</th>
          <td>{{ review["serviceName"] }}</td>
          <td>{{ review["date"] }}</td>
          <td><button type = "button" class = "btn btn-success" > ايجابي</button></td>
          <td>
            <button
              type="button"
              class="btn"
              [class.btn-outline-warning]="review.state === 'قيد التنفيذ'"
              [class.btn-outline-success]="review.state === 'تم الحل'"
              [class.btn-outline-danger]="review.state === 'قيد الانتظار'"
            >
              {{ review["state"] }}
            </button>
          </td>
        </tr>

        <tr
          class="table-light"
          id="negative"
          *ngFor="let review of negativeListReviews"
        >
          <th scope="row">{{ review["description"] }}</th>
          <td>{{ review["serviceName"] }}</td> 
          <td>{{ review["date"] }}</td>   
          <td><button type = "button" class = "btn btn-danger" > سلبي</button></td>
          <td>
            <button
              type="button"
              class="btn"
              [class.btn-outline-warning]="review.state === 'قيد التنفيذ'"
              [class.btn-outline-success]="review.state === 'تم الحل'"
              [class.btn-outline-danger]="review.state === 'قيد الانتظار'"
            >
              {{ review["state"] }}
            </button>
          </td>
        </tr>

        <tr
          class="table-light"
          id="neutral"
          *ngFor="let review of neutralListReviews"
        >
          <th scope="row">{{ review["description"] }}</th>
          <td>{{ review["serviceName"] }}</td>
          <td>{{ review["date"] }}</td>
          <td><button type = "button" class = "btn btn-warning" > محايد</button></td>
          <td>
            <button
              type="button"
              class="btn"
              [class.btn-outline-warning]="review.state === 'قيد التنفيذ'"
              [class.btn-outline-success]="review.state === 'تم الحل'"
              [class.btn-outline-danger]="review.state === 'قيد الانتظار'"
            >
              {{ review["state"] }}
            </button>
          </td>
        </tr>
      </tbody>
    </table>
</div>
</html>
